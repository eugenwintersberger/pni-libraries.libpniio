

<!doctype html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A basic introduction to Nexus &#8212; libpninexus 3.0.0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Working with files" href="nexus_files.html" />
    <link rel="prev" title="NeXus support" href="nexus.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="nexus_files.html" title="Working with files"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="nexus.html" title="NeXus support"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">libpninexus 3.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Users guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="nexus.html" accesskey="U">NeXus support</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">A basic introduction to Nexus</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="a-basic-introduction-to-nexus">
<h1>A basic introduction to Nexus<a class="headerlink" href="#a-basic-introduction-to-nexus" title="Permalink to this headline">¶</a></h1>
<div class="section" id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Permalink to this headline">¶</a></h2>
<p>Today, data recorded during synchrotron experiments is typically stored in
individual binary image files and/or as flat ASCII files. A typical directory
structure for an individual run could look like this</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>~/run_001/ user@localhost:$&gt; ls

run_001.dat
detector/image_0001.tif
detector/image_0002.tif
...
...
...
detector/image_0100.tif
</pre></div>
</div>
<p>The ASCII file <code class="file docutils literal notranslate"><span class="pre">run_001.dat</span></code> stores scalar data while the detector data is
stored in a separate directory as image files (here TIFF).
Such an approach leads to technical and organizational problems</p>
<ul class="simple">
<li><p>when the number of image files grows large the performance of most file
systems degenerate</p></li>
<li><p>to access data in an individual image file a new file handler has to be
created</p></li>
<li><p>image and scalar data is stored in different files which increases the
managements efforts to keep related information together.</p></li>
</ul>
<p>NeXus is a binary file format which attempts to solve all of these problems.
NeXus can keep scalar and multidimensional data within a single file and allows
to organize the data within the file in a tree like manager. Additional
attributes can be attached to each object in a file, storing metadata which
might be required for later analysis. It must be noted that NeXus is not a
physical file format itself. It is rather a set of rules how data must be
organized within a particular format in order to become a valid Nexus file.
Currently the following physical file formats are supported by the original
Nexus API</p>
<ul class="simple">
<li><p><em>XML</em> – only used for file structure validation</p></li>
<li><p><em>HDF4</em> – for historical reasons, should not be used for new data</p></li>
<li><p><em>HDF5</em> – the current standard storage backend for Nexus files.</p></li>
</ul>
<p>One of the aims of <em>libpninexus</em> is to provide an abstraction layer between the
user and the storage backend. As <em>libpninexus</em> currently supports only HDF5 this is
rather artificial. However, <em>libpninexus</em> provides the architecture to include
other file formats to be used with NeXus too.
There has been a lot of confusion what physical file format NeXus files are.
Many users think that NeXus has its own physical file format. This is in fact
not true. Just to avoid any further confusion for the reader let me make this
clear once and for all</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p><strong>Every NeXus file written by libpninexus is also a valid HDF5 file!</strong></p>
</div>
<p>To access NeXus files <em>libpninexus</em> uses the <em>h5cpp</em> C++ wrapper to HDF5.
Actually most of the work with NeXus files can be done directly with
<em>h5cpp</em>, <em>libpninexus</em> only adds additional functionality specific to the
NeXus file standard.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Before you continue reading this documentation you should have a firm
idea about <em>h5cpp</em>’s concepts and API. So if you never used <em>h5cpp</em> before
you better go away for a while here and read the <a class="reference external" href="https://ess-dmsc.github.io/h5cpp/index.html">h5cpp documentation</a>.</p>
</div>
</div>
<div class="section" id="the-nexus-layer-model">
<h2>The Nexus layer model<a class="headerlink" href="#the-nexus-layer-model" title="Permalink to this headline">¶</a></h2>
<p>As already mentioned in the previous section, NeXus can be considered as a set
of rules describing the logical organization of data within a file.
NeXus, for this purpose, utilizes types defined in three different layers.</p>
<div class="figure align-center">
<img alt="../_images/layers.svg" src="../_images/layers.svg" /></div>
<p>Each group of types defined in a layer is used for a particular purpose. Layer 1
provides the basic brick-stones from which the NeXus standard is build of.
Layer 2 provides collections of Layer 1 instances representing concrete beamline
components as well as abstract concepts. Layer 3 finally can be used to define
file formats for particular experimental techniques.</p>
<div class="section" id="layer-1-objects">
<h3>Layer 1 objects<a class="headerlink" href="#layer-1-objects" title="Permalink to this headline">¶</a></h3>
<p>The first layer in the NeXus layer model provides the fundamental types used
to define the organizational structure of data in a file.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 78%" />
<col style="width: 1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>object</p></th>
<th class="head"><p>description</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>NXgroup</em></p></td>
<td><p>is a container which can hold instances of fields and
other groups.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><em>NXfield</em></p></td>
<td><p>stores numerical and other data.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><em>NXattribute</em></p></td>
<td><p>instances of NXgroup and NXfield can be enhanced with
attributes which can store additional metadata about an
object.</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>Attributes behave a little like fields as will be shown later. These three types
form the basement for all other objects in the above layers.
It should be mentioned that attributes are heavily used by the NIAC to add
metadata to a group or field. It is thus not wise to make too extensive use of
attributes as a Nexus user as it my cause name clashes with future attributes
defined by the NIAC.</p>
<p>The focus of <em>libpninexus</em> is this first layer of the NeXus hierarchy. <em>libpninexus</em>
uses HDF5 to store NeXus files. In particular the C++ wrapper <em>h5cpp</em> is
used. There is a simple mapping between these basic Layer 1 types and native
HDF5 types</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>NeXus type</p></th>
<th class="head"><p>HDF5 type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>NXgroup</em></p></td>
<td><p><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">hdf5::node::Group</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><em>NXfield</em></p></td>
<td><p><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">hdf5::node::Dataset</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>NXattribute</em></p></td>
<td><p><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">hdf5::attribute::Attribute</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="layer-2-objects">
<h3>Layer 2 objects<a class="headerlink" href="#layer-2-objects" title="Permalink to this headline">¶</a></h3>
<p>Objects from the second layer are composites of the types provided by the first
layer. They describe logical or physical entities at a beamline.
These range from the very concrete objects like undulators or detectors to
abstract concepts like <em>entries</em> and <em>subentries</em>.
The available objects from Layer 2 are defined in the Nexus Base class
catalog.</p>
</div>
<div class="section" id="layer-3-objects">
<h3>Layer 3 objects<a class="headerlink" href="#layer-3-objects" title="Permalink to this headline">¶</a></h3>
<p>The third layer finally provides concepts to standardize the structure of a
Nexus data tree for particular scientific applications and methods.
These so called <em>Application Definitions</em> are defined by the NIAC in
collaboration with the scientific community.</p>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">A basic introduction to Nexus</a><ul>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#the-nexus-layer-model">The Nexus layer model</a><ul>
<li><a class="reference internal" href="#layer-1-objects">Layer 1 objects</a></li>
<li><a class="reference internal" href="#layer-2-objects">Layer 2 objects</a></li>
<li><a class="reference internal" href="#layer-3-objects">Layer 3 objects</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="nexus.html"
                        title="previous chapter">NeXus support</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="nexus_files.html"
                        title="next chapter">Working with files</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script><p>
  <h3 class='versions'>Versions</h3>
  <p>
    <ul>
      <li><a class="reference external" href="../index/../../latest/index.html">v:latest</a></li>
      <li><a class="reference external" href="../index/../../stable/index.html">v:stable</a></li>
      
      <li><a class="reference external" href="../index/../../v3.0.0/index.html">v3.0.0</a></li>
      <li><a class="reference external" href="../index/../../v2.0.0/index.html">v2.0.0</a></li>
      <li><a class="reference external" href="../index/../../v1.3.2/index.html">v1.3.2</a></li>
      <li><a class="reference external" href="../index/../../v1.2.10/index.html">v1.2.10</a></li>
      
    </ul>
  </p>
</p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="nexus_files.html" title="Working with files"
             >next</a> |</li>
        <li class="right" >
          <a href="nexus.html" title="NeXus support"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">libpninexus 3.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Users guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="nexus.html" >NeXus support</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">A basic introduction to Nexus</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, DESY, Eugen Wintersberger.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>
  </body>
</html>